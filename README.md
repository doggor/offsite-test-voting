# SImple Voting

## Pre-requirements
1. NodeJS v12+
2. Docker v19+

## Setup
1. Create a `.env` file at root and copy the content from `.env.test`:
   ```sh
    cp .env.test .env
   ```
2. By default, port 27017 and 6379 will be used for our MongoDB and Redis instance, respectively. If these ports are already in use, please change the port number in your `.env` file and it should be align with `docker-compose.yml` file.
3. Launch MongoDB and Redis via docker compose:
   ```sh
   docker-compose up
   ```
4. Install project dependencies:
   ```sh
    npm i
   ```
5. Launch server:
   ```sh
   npm start
   ```
   By default, port 8080 will be used by the NodeJS server. If this port is already in use, please pass a new port number through the `PORT` envirnment variable when launching, for example:
   ```sh
    PORT=8888 npm start
   ```

## API Doc
This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project. Please checkout the server API from the following page (You have to launch the server first):
```
http://localhost:8080/docs
```

## Postman Collection
There is a `postman-collection.json` file (v2.1) at the project root which contains examples of how to interact with the HTTP API. You may import it into your postman application. Notice that you should change the IDs recorded in the collection to the actual values found in your runtime, or else almost of the requests will be failure.

## Unit Tests
There are few test cases that cover the core services. You may run through this command:
```sh
npm run test
```
